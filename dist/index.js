function ___$insertStyle(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}Object.defineProperty(exports,"__esModule",{value:!0});var react=require("react");function __awaiter(c,o,u,i){return new(u=u||Promise)(function(e,t){function r(e){try{a(i.next(e))}catch(e){t(e)}}function n(e){try{a(i.throw(e))}catch(e){t(e)}}function a(t){t.done?e(t.value):new u(function(e){e(t.value)}).then(r,n)}a((i=i.apply(c,o||[])).next())})}function __generator(r,n){var a,c,o,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,c&&(o=2&t[0]?c.return:t[0]?c.throw||((o=c.return)&&o.call(c),0):c.next)&&!(o=o.call(c,t[1])).done)return o;switch(c=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,c=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(o=0<(o=u.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){u.label=t[1];break}if(6===t[0]&&u.label<o[1]){u.label=o[1],o=t;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(t);break}o[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(r,u)}catch(e){t=[6,e],c=0}finally{a=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function __spreadArrays(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var c=arguments[t],o=0,u=c.length;o<u;o++,a++)n[a]=c[o];return n}var setPromiseMiddleware=function(a,c){return __awaiter(void 0,void 0,void 0,function(){var t,r,n;return __generator(this,function(e){switch(e.label){case 0:return[4,a];case 1:t=e.sent(),r=0,n=c,e.label=2;case 2:return r<n.length?[4,(0,n[r])(t)]:[3,5];case 3:e.sent(),e.label=4;case 4:return r++,[3,2];case 5:return[2,t]}})})},CACHE_DURATION=18e5,getCacheKey=function(e,t){return e+t},getCache=function(e,t){var r=getCacheKey(e,t);return cacheService.get(r)},setCache=function(e,t,r){var n=getCacheKey(e,r);return cacheService.set(n,t)},LocalStorageService={set:function(e,t){localStorage&&localStorage.setItem(e,JSON.stringify(t))},get:function(e){if(localStorage){var t=localStorage.getItem(e);if(t)return JSON.parse(t)}},delete:function(e){localStorage&&localStorage.removeItem(e)}},isValidDate=function(e){return new Date-new Date(e)<=CACHE_DURATION},CacheService=function(){function e(){this.cache=LocalStorageService}return e.prototype.set=function(e,t){var r={value:t,date:new Date};this.cache.set(e,r)},e.prototype.get=function(e){var t=this.cache.get(e);if(t){if(isValidDate(t.date))return t.value;this.cache.delete(e)}},e}(),cacheService=new CacheService,nullValue=void 0,defaultGetErrorMessageCallback=function(e){return e},useApiRequest=function(e){function t(){return D("")}function r(e){return k(!0),b("PENDING"),setPromiseMiddleware(e,I).catch(function(e){var t=l(e);b("FAIL"),D(l(t)),u&&u.errorAlert({content:t}),y&&y(e)}).finally(function(){k(!1)})}function n(e){var t;return o&&c&&((t=getCache(c,a))&&r(Promise.resolve(t))),r(g(e))}var a=e.token,c=e.name,o=e.cache,u=e.alertService,i=e.getErrorMessageCallback,l=void 0===i?defaultGetErrorMessageCallback:i,s=e.fetchOnMountData,f=e.fetchOnMount,h=e.middleware,d=void 0===h?[]:h,v=e.successMessage,g=e.request,p=e.defaultData,y=e.catchCallback,S=react.useState("WAIT"),C=S[0],b=S[1],w=react.useState(p||nullValue),_=w[0],m=w[1],A=react.useState(""),M=A[0],D=A[1],E=react.useState(!1),x=E[0],k=E[1],I=__spreadArrays(d,[function(e){return o&&c&&setCache(c,e,a),e},m,t,function(e){return v&&u&&u.successAlert({content:v}),b("SUCCESS"),e}]);return react.useEffect(function(){f&&n(s)},[]),{setData:m,status:C,errorMessage:M,cleanErrorMessage:t,isPending:x,data:_,sendRequest:n}};exports.default=useApiRequest,exports.getCache=getCache,exports.setCache=setCache;
//# sourceMappingURL=index.js.map
